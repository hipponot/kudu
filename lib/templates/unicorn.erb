# set path to app that will be used to configure unicorn, 
# note the trailing slash in this example
dir = File.join(File.expand_path(File.dirname(__FILE__ )), File::SEPARATOR)

worker_processes 3
working_directory dir
timeout 30
preload_app false

# Application directories
FileUtils.mkdir_p "/tmp/unicorn/sockets/<%=project_name%>-<%=project_version%>"
FileUtils.mkdir_p "/tmp/unicorn/pids/<%=project_name%>-<%=project_version%>"
FileUtils.mkdir_p "/var/log/unicorn/<%=project_name%>-<%=project_version%>"

# Specify path to socket unicorn listens to, 
# we will use this in our nginx.conf later
listen "/tmp/unicorn/sockets/<%=project_name%>-<%=project_version%>/unicorn.sock", :backlog => 64

# Set process id path
pid "/tmp/unicorn/pids/<%=project_name%>-<%=project_version%>/unicorn.pid"

# Set log file paths
stderr_path "/var/log/unicorn/<%=project_name%>-<%=project_version%>/stderr.log"
stdout_path "/var/log/unicorn/<%=project_name%>-<%=project_version%>/stdout.log"
